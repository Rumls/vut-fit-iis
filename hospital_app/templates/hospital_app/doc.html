<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0070)https://www.fit.vutbr.cz/study/courses/IIS/private/projekt/doc.html.cs -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Dokumentace projektu IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
			code { background-color: #AAFFFF;  }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu 
     podle použitého editoru -->

<h1>Nemocnice: elektronická zdravotní knížka</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autoři</dt>
	<dd>Adam Múdry <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xmudry00@stud.fit.vutbr.cz">xmudry01@stud.fit.vutbr.cz</a> -
		popis činnosti v týmu
	</dd>
	<dd>Jakub Mĺkvy <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xmlkvy00@stud.fit.vutbr.cz">xmlkvy00@stud.fit.vutbr.cz</a> - 
		popis činnosti v týmu
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="https://vut-fit-iis-hospital-app.herokuapp.com/">https://vut-fit-iis-hospital-app.herokuapp.com/</a></dd>
</dl>

<h2>Užívatelia systému pre testovanie</h2>
<table>
<tbody><tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>andragogika@kadlecova.sk</td><td>heslo123</td><td>Admin</td></tr>
<tr><td>dr@dr.sk</td><td>heslo123</td><td>Doctor</td></tr>
<tr><td>star@wars.com</td><td>a1s2d3f4g5h6j7k8l9</td><td>Patient</td></tr>
<tr><td>jankosmrekovec@centrum.sk</td><td>heslo123</td><td>Health Insurance Company Worker</td></tr>
</tbody></table>

<h2>Implementácia</h2>
<p>Dve hlavné zložky na implementáciu use case diagramu sú <code>hospitall_app/views.py</code> a <code>hospitall_app/forms.py</code>.<br>
Obmedzenia formulárov sú realizované v šablónových (template) html súboroch <code>hospitall_app/templates/</code>.<br>
Povinné polia formulárov sú odlíšené * (hviezdičkou).
</p>
<ul>
	<li>                            
		<p><b>administrátor:</b></p>	          
		<ul>
			<li>spravuje uživatele a jejich role</li>
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">
			zobrazenie všetkých užívateľov <code>class UsersView(ListView)</code> <br>
			zobrazenie jednotlivých užívateľov <code>def profile(request, o_id=None)</code> <br>
			editácia užívateľov <code>def user_change(request, o_id=None)</code> &rarr; formulár <code>class CustomUserChangeForm(UserChangeForm)</code> <br>
			mazanie užívateľov <code>def user_delete(request, o_id=None)</code> (pri vymazaní užívateľa vymaže aj všetky veci s ním spoločné) <br>
			</p>
			<li>má rovněž práva všech následujících rolí</li>
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">zobrazovanie a akcie bez obmedzení<p>
		</ul>
	</li>
	<li>                            
		<p><b>pracovník zdravotní pojišťovny:</b></p>
		<ul>
			<li>vytváří databázi typů hrazených úkonů</li>
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">
			zobrazenie všetkých úkonov <code>class MedicalActsView(ListView)</code> <br>
			zobrazenie jednotlivých úkonov <code>def medical_act(request, o_id)</code> <br>
			pridávanie úkonov <code>def medical_act_add(request)</code> &rarr; formulár <code>class MedicalActCreationForm(forms.ModelForm)</code> <br>
			editácia úkonov <code>def medical_compensation_change(request, o_id)</code> &rarr; obmedzený formulár <code>class MedicalActCreationForm(forms.ModelForm)</code> <br>
			mazanie úkonov <code>def medical_compensation_delete(request, o_id)</code> <br>
			</p>
			<li>řeší (schvaluje) žádosti o úhradě úkonů</li>
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">
			zobrazenie všetkých žiadostí úkonov <code>class MedicalCompensationView(ListView)</code> <br>
			zobrazenie jednotlivých žiadostí úkonov <code>def medical_compensation(request, o_id)</code> <br>
			schvalovanie žiadostí úkonov <code>def medical_compensation_change(request, o_id)</code> &rarr; obmedzený formulár <code>class MedicalCompensationForm(forms.ModelForm)</code> <br>
			</p>
		</ul>                            
	</li>
	<li>                            
		<p><b>lékař:</b></p>                            
		<ul>
			<li>vytváří záznamy o zdravotních problémech:
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">
			zobrazenie všetkých problémov patriace danému lekárovi <code>class ProblemsView(ListView)</code> <br>
			zobrazenie jednotlivých problémov <code>def problem(request, o_id)</code> <br>
			pridávanie problémov <code>def problem_add(request)</code> &rarr; formulár <code>class ProblemCreationForm(forms.ModelForm)</code> <br>
			editácia problémov <code>def problem_change(request, o_id)</code> &rarr; formulár <code>class ProblemChangeForm(forms.ModelForm)</code> <br>
			neexistuje mazanie problémov kvôli vedeniu histórie, problém sa jednoducho uvedie do vybaveného stavu <br>
				<ul>
					<li>vytváří žádosti o vyšetření (tikety); přiřazuje je jiným lékařům (nebo sobě - pro žádosti o proplácení zdravotních úkonů)</li>
					<p style="margin: 0px; padding-left: 4rem">&darr;</p>
					<p style="margin-bottom: 1rem; margin-top: 0px">
					zobrazenie všetkých tiketov patriace danému lekárovi <code>class TicketsView(ListView)</code> <br>
					zobrazenie jednotlivých tiketov <code>def ticket(request, o_id)</code> <br>
					pridávanie tiketov (priradenie aj iným lekárom) <code>def ticket_add(request)</code> &rarr; formulár <code>class TicketCreationForm(forms.ModelForm)</code> <br>
					editácia tiketov (prípadná zmena priradenia) <code>def ticket_change(request, o_id)</code> &rarr; formulár <code>class TicketChangeForm(forms.ModelForm)</code> <br>
					neexistuje mazanie tiketov kvôli vedeniu histórie, tiket sa jednoducho uvedie do vybaveného stavu <br>
					<li>může předat záznam o zdravotním problému jinému lékaři</li>
					<p style="margin: 0px; padding-left: 4rem">&darr;</p>
					<p style="margin-bottom: 1rem; margin-top: 0px">problém sa automaticky zobrazí lekárovi, ktorý má pridelený tiket s daným problémom, keďže tiket existuje na riešenie daného problému ku ktorému patrí<p>
				</ul>
			</li>
			<li>vyřizuje přiřazené tikety; v rámci tiketu může:
			<p style="margin: 0px; padding-left: 4rem">&darr;</p>
			<p style="margin-bottom: 1rem; margin-top: 0px">riešené pomocou editácie tiketov (zobrazujú sa iba tikety priradené danému lekárovi)</p>
				<ul>
					<li>vkládat lékařské zprávy</li>
					zobrazenie všetkých lekárskych danému lekárovi <code>class ProblemsView(ListView)</code> <br>
					zobrazenie jednotlivých problémov <code>def problem(request, o_id)</code> <br>
					pridávanie problémov <code>def problem_add(request)</code> &rarr; formulár <code>class ProblemCreationForm(forms.ModelForm)</code> <br>
					editácia problémov <code>def problem_change(request, o_id)</code> &rarr; formulár <code>class ProblemChangeForm(forms.ModelForm)</code> <br>
					neexistuje mazanie problémov kvôli vedeniu histórie, problém sa jednoducho uvedie do vybaveného stavu <br>
					<li>zažádat o proplacení n zdravotních úkonů zdravotní pojišťovnou</li>
				</ul>
			</li>
			<li>vkládá lékařské zprávy ke spravovaným záznamům</li>
		</ul>                            
	</li>
	<li>                            
		<p><b>pacient:</b></p>                            
		<ul>
			<li>prohlíží záznamy o svých zdravotních problémech</li>
		</ul>
	</li>
</ul>

<h3>Databáza</h3>

Zde vložte grafické schéma relační databáze (tabulek v databázi).

<h2>Inštalácia</h2>

Postup inštalácie:
<ul>
	<li>Linux (Debian, Ubuntu, PopOS, ...)</li>
	<ul>
		<li><code>sudo apt install -y git python3 python3-pip postresql libpq-dev snap</code></li>
		<li><code>sudo snap install --classic heroku</code></li>
		<li><code>sudo pip3 install -r requirements.txt</code></li>
	</ul>
	<br>
	<li>Windows</li>
	<ul>
		<li>Nainštalujte: git, python3, pip3, PostrgreSQL, Heroku CLI</li>
		<li><code>pip install --user -r requirements.txt</code></li>
	</ul>
</ul>

Spustenie <b>(na Windows používajte "python" miesto "python3", všetky príkazy sa vykonávajú v priečinku, kde je manage.py == root priečinok)</b>:
<ul>
	<li>a) Databáza na interete - projekt je už nastavený, aby ju používal</li>
	<ul>
		<li>Pred prvým spustením: <code>python manage.py collectstatic</code></li>
		<li><code>python3 manage.py runserver 0:8000</code> (alebo iný ľubovoľný port)</li>
		<li>Otvorte v prehliadači <code>localhost:port</code></li>
	</ul>
	<br>
	<li>b) Lokálna databáza <b>Vytvorená databáza bude prázdna!</b></li>
	<ul>
		<li>Vytvorte PostrgreSQL databázu</li>
		<li>Pripojte sa do jej shell prostredia a zadajte príkaz: <code>CREATE EXTENSION unaccent;</code></li>
		<li>Ak príkaz prebehol úspešne, môžete pripojenie uzavrieť pomocou <code>\q</code></li>
		<li>Upravte súbor <code>hospital/settings.py</code> a jeho premennú <code>DATABASES['default']</code> tak, aby projekt používal novú databázu</li> 
		<li><code>python3 manage.py makemigrations</code></li>
		<li><code>python3 manage.py migrate</code></li>
		<li>Teraz môžete pokračovať ako pri databázi na internete po <b>a)</b></li>
	</ul>
</ul>


